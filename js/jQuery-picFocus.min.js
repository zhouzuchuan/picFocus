/*
*
*create by zhouzuchuan (.com)
*https://github.com/zhouzuchuan/picFocus
*
*/
(function(h){if(h.fn.picFocus){return}var b='<style type="text/css">'+".pf_picWrap {position: relative;overflow: hidden;z-index: 1;}"+".pf_picWrap ul {position: absolute;left: 0;top: 0;font-size: 0;letter-spacing: -4px;z-index: 1;}"+".pf_picWrap ul li {position: relative;display: inline-block;max-height: 100%;font-size: 12px;letter-spacing: 0;overflow: hidden;text-align: center;vertical-align: middle;*float: left;}"+".pf_loading {position: absolute;left: 0;top: 0;width: 100%;text-align: center;background: #fff;z-index: 10;}"+".pf_loading span {position: absolute;left: 0;top: 50%;display: inline-block;width: 100%;font-size: 20px;color: #666;font-family: Microsoft YaHei;}"+".pf_loading em , .pf_loading strong {display: inline-block;vertical-align: middle;font-weight: normal;}"+".pf_loadingIco {width: 32px;height: 32px;margin-right: 10px;background-size: contain;}"+".pf_txtWrap {position: relative;margin-top: -40px;height: 40px;line-height: 40px;z-index: 5;overflow: hidden;}"+".pf_txtUl {position: absolute;left: 0;top: 0;z-index: 2;}"+".pf_txtLi {display: none; padding: 0 30px;font-size: 20px;color: #fff; background: transparent;}"+".pf_txtLi.active {display: inline-block;}"+".pf_txtBg {position: absolute;left: 0;top: 0;width: 100%;height: 100%;background: #888;opacity: .5;filter: alpha(opacity=50);z-index: 1;}"+".pf_thumbWrap {position: relative;overflow: hidden;}"+".pf_thumbUl {position: relative;letter-spacing: -4px;font-size: 0;}"+".pf_thumbLi , .pf_thumbLiPic , .pf_thumbLiPoint {display: inline-block;letter-spacing: 0;font-size: 12px;cursor: pointer;*float: left;zoom: 1;}"+".pf_thumbLi img , .pf_thumbLiPic img , .pf_thumbLiPoint img {width: 100%;height: 100%;}"+".pf_thumbLiPic {padding: 4px;height: 60px;}"+".pf_thumbLiPoint {display: inline-block;width: 10px;height: 5px;background: #fff;overflow: hidden;}"+".pf_thumbLiPic.active , .pf_thumbLiPoint.active {background: orange;}"+".pf_next , .pf_prev {position: absolute;top: 50%;display: inline-block;width: 50px;height: 50px;line-height: 50px;font-size: 40px;font-weight: bold;color: #fff;font-family: SimHei;margin-top: -25px;text-align: center;background: #000;cursor: pointer;opacity: .5;filter: alpha(opacity=50);z-index: 2;}"+".pf_next:hover , .pf_prev:hover {opacity: .9;filter: alpha(opacity=90);}"+".pf_next {right: 20px;}"+".pf_prev {left: 20px;}";h("head").append(b);h.fn.picFocus=function(q){var r={ele:h(this),eul:h(this).children("ul"),eli:h(this).children("ul").children("li")};if(this.length>1){return this.each(function(){h(this).picFocus(q,r)})}q=h.extend({},r,q||{});h.picFocus(q,r)};var n={},i={};h.picFocus=function(s,t){var u=h.extend({},s||{});var r=h.extend({},t,{btnNext:".pf_next",btnPrev:".pf_prev",thumbDom:".pf_thumbUl",txtDom:".pf_txtUl",width:"",height:"",realTimeParam:{},index:1,removing:0,moveSwitch:true,ifHoverOut:"",directionNum:-1,eliSize:0,timer:"",interval:2000,duration:500,easing:"swing",nowIndex:0,nextIndex:0,loadingShow:true,loadingText:"玩命加载中！",loadingImgSrc:"http://365jia.cn/images/load.gif",thumbShow:false,thumbShowSize:5,thumbStatus:2,thumbArr:[],copySize:1,txtShow:false});var q={};q._init=function(){var z="",D="",w;r.eliSize=r.eli.length;r.width=l(u.width)?u.width:r.ele.width();r.height=l(u.height)?u.height:r.ele.height();r.removing=r.width;r.copySize=a(u.copySize)?r.copySize:(u.copySize>r.eliSize)?r.eliSize:u.copySize;r.eli.slice((r.eliSize-r.copySize),r.eliSize).each(function(G,H){z+="<li>"+h(H).html()+"</li>"});r.eli.slice(0,r.copySize).each(function(G,H){D+="<li>"+h(H).html()+"</li>"});r.ele.css({"position":"relative"});r.eul.wrap('<div class="pf_picWrap"></div>').append(D).prepend(z).width(r.removing*(r.eul.children("li").size()+2)).css({"height":r.height}).parent().css({"width":r.width,"height":r.height}).find("li").width(r.width);r.eul.addClass("pf_picUl");r.eul.children("li").addClass("pf_picLi");r.showIndex=l(u.showIndex)?u.showIndex:0;if(r.showIndex>=0&&r.showIndex<=r.eliSize){r.index=r.showIndex+r.copySize}else{if(r.showIndex>r.eliSize){r.index=(r.showIndex%r.eliSize)+1}}w=r.copySize>1?(r.copySize-1):0;if(r.index==(r.eliSize+r.copySize)){r.index=r.copySize}else{if(r.index==w){r.index=r.eliSize+w}}r.eul.css({"left":(r.index*r.directionNum)*r.removing});r.nowIndex=r.showIndex>=r.eliSize?(r.showIndex%r.eliSize):r.showIndex;r.ele.find(r.btnPrev).hide();r.ele.find(r.btnNext).hide();if(p(u.next)&&p(u.prev)){if(o(u.hideNextPrev)){r.ele.find(r.btnPrev).show();r.ele.find(r.btnNext).show()}}else{if(!c(u.hideNextPrev)){r.eul.after('<span class="pf_next">&gt;</span><span class="pf_prev">&lt;</span>');if(u.hideNextPrev=="hover"){r.ele.find(r.btnPrev).hide();r.ele.find(r.btnNext).hide()}}}if(r.nowIndex>r.thumbShowSize||!a(r.showIndex)){r.thumbArr=[0,r.thumbShowSize-r.copySize]}else{r.thumbArr=[r.nowIndex-(r.thumbShowSize-r.copySize),r.nowIndex]}if(c(r.thumbShow)){r.ele.append('<div class="pf_thumbWrap"><ul class="pf_thumbUl"></ul></div>');var x=document.createDocumentFragment(),C,y;for(var B=0;B<r.eliSize;B++){var F=document.createElement("li");
F.className="pf_thumbLi";if(r.thumbStatus===2){var A=document.createElement("img");A.src=r.eli.eq(B).find("img").attr("src");F.className="pf_thumbLiPic";F.appendChild(A)}else{if(r.thumbStatus===1){F.className="pf_thumbLiPoint"}}x.appendChild(F)}r.ele.find(r.thumbDom).append(x);y=r.ele.find(r.thumbDom).find("li").outerWidth(true)-r.ele.find(r.thumbDom).find("li").width();if(r.thumbShowSize<=r.eliSize&&r.thumbStatus!=1){C=Math.ceil(r.width/r.thumbShowSize)}else{C=Math.ceil(r.width/r.eliSize)}r.ele.find(r.thumbDom).find("li").width(C-y);r.ele.find(r.thumbDom).width(C*r.eliSize).parent().css({"width":r.width});if(m(u.thumb.style)){r.ele.find(r.thumbDom).find("li").css(u.thumb.style)}r.ele.find(r.thumbDom).find("li").click(function(){if(!r.moveSwitch){return false}r.index=h(this).index()+r.copySize;q._clickMove(null,h(this).parents(r.ele))});q._thumbClick(r.nowIndex)}if(c(r.txtShow)){r.eul.parent().after('<div class="pf_txtWrap"><ul class="pf_txtUl"></ul><p class="pf_txtBg"></p></div>');var x=document.createDocumentFragment();for(var B=0;B<r.eliSize;B++){var F=document.createElement("li");F.className="pf_txtLi";var E=document.createElement("span");E.innerHTML=r.eli.eq(B).find("img").attr("title");F.appendChild(E);x.appendChild(F)}r.ele.find(r.txtDom).append(x);r.ele.find(r.txtDom).parent().css({"width":r.width});q._switchTxt(r.nowIndex)}r.ele.find(r.btnPrev).click(function(){clearInterval(r.timer);q._clickMove("prev",h(this).parents(r.ele))});r.ele.find(r.btnNext).click(function(){clearInterval(r.timer);q._clickMove("next",h(this).parents(r.ele))});r.eul.parent().on({mouseenter:function(){if(u.hideNextPrev=="hover"){r.ele.find(r.btnNext).show();r.ele.find(r.btnPrev).show()}if(c(u.hoverStop)){clearInterval(r.timer);r.ifHoverOut=true}},mouseleave:function(){if(u.hideNextPrev=="hover"){r.ele.find(r.btnNext).hide();r.ele.find(r.btnPrev).hide()}if(c(u.hoverStop)){r.ifHoverOut=false;r.timer=setInterval(v,r.interval)}}});r.realTimeParam={nowImg:r.eli.eq(r.nowIndex).find("img"),totalSize:r.eliSize,nowIndex:r.nowIndex,nextIndex:r.nextIndex}};q._clickMove=function(x,w){if(!r.moveSwitch){return false}r.moveSwitch=false;clearInterval(r.timer);var y=1;if(x==="next"){r.index++}else{if(x==="prev"){r.index--;y=-1}}r.nowIndex=r.index-r.copySize;console.log(r.nowIndex+":"+r.index);r.nextIndex=r.nowIndex+y;if(r.nowIndex>=r.eliSize){r.nowIndex%=r.eliSize}else{if(r.nowIndex<0){r.nowIndex+=r.eliSize}}if(r.nextIndex>=r.eliSize){r.nextIndex%=r.eliSize}else{if(r.nextIndex<0){r.nextIndex+=r.eliSize}}q._thumbClick(r.nowIndex);w.children(".pf_picWrap").find("ul").stop().animate({"left":(r.index*r.directionNum)*r.removing},r.duration,r.easing).queue(function(A){var z=r.copySize>1?(r.copySize-1):0;if(r.index==(r.eliSize+r.copySize)){r.index=r.copySize}else{if(r.index==z){r.index=r.eliSize+z}}w.children(".pf_picWrap").find("ul").css("left",(r.index*r.directionNum)*r.removing);r.moveSwitch=true;A();r.realTimeParam={nowImg:r.eli.eq(r.nowIndex).find("img"),totalSize:r.eliSize,nowIndex:r.nowIndex,nextIndex:r.nextIndex};q._switchTxt(r.nowIndex);if(f(u.after)){u.after(r.realTimeParam)}if(!c(u.auto)){return false}if(c(r.ifHoverOut)){return false}clearInterval(r.timer);r.timer=setInterval(v,r.interval)})};q._thumbClick=function(w){if(!c(r.thumbShow)){return false}if(r.eliSize>r.thumbShowSize&&r.thumbStatus!=1){if(w>=Math.max.apply(null,r.thumbArr)){if(w>=r.eliSize-1){r.thumbArr=[r.eliSize-r.thumbShowSize,r.eliSize-1]}else{r.thumbArr=[w-(r.thumbShowSize-2),w+1]}}else{if(w<=Math.min.apply(null,r.thumbArr)){if(w<=0){r.thumbArr=[0,r.thumbShowSize-1]}else{r.thumbArr=[w-1,w+(r.thumbShowSize-2)]}}}r.ele.find(r.thumbDom).stop().animate({"left":-Math.min.apply(null,r.thumbArr)*r.ele.find(r.thumbDom).find("li").outerWidth(true)},r.duration,r.easing)}r.ele.find(r.thumbDom).find("li").each(function(x,y){h(y).removeClass("active")});r.ele.find(r.thumbDom).find("li").eq(w).addClass("active")},q._switchTxt=function(w){if(!c(r.txtShow)){return false}r.ele.find(r.txtDom).find("li").each(function(x,y){h(y).removeClass("active")});r.ele.find(r.txtDom).find("li").eq(w).addClass("active")},q._imgLoad=function(x,y){var w=setInterval(function(){if(x.complete||(x.width&&x.height&&document.all)){y(x);clearInterval(w)}},30)},q._loading=function(){if(!c(r.loadingShow)){return false}r.eul.find("li").each(function(w,x){h(x).append('<div class="pf_loading"><span class=""><em></em><strong>'+r.loadingText+"</strong></span></div>");h(x).find(".pf_loading").find("em").addClass("pf_loadingIco").css({"background-image":"url("+r.loadingImgSrc+")"});q._imgLoad(h(x).find("img").get(0),function(y){h(y).parents("li").find(".pf_loading").remove()})});h(".pf_loading").height(r.height);if(f(u.loadAfter)){u.loadAfter(r.realTimeParam)}};if(p(u.next)){r.btnNext=u.next}if(p(u.prev)){r.btnPrev=u.prev}if(m(u.thumb)){if(c(u.thumb.show)){r.thumbShow=true}if(l(u.thumb.showSize)){r.thumbShowSize=u.thumb.showSize}if(p(u.thumb.status)){switch(u.thumb.status){case"point":r.thumbStatus=1;break;case"picture":r.thumbStatus=2;
break}}}if(m(u.txt)){if(c(u.txt.show)){r.txtShow=true}}if(m(u.loading)){if(o(u.loading.show)){r.loadingShow=false}if(p(u.loading.text)){r.loadingText=u.loading.text}if(p(u.loading.loadingImgSrc)){r.loadingImgSrc=u.loading.loadingImgSrc}}q._init();q._loading();if(m(u.scroll)){if(l(u.scroll.interval)){r.interval=u.scroll.interval}if(l(u.scroll.duration)){r.duration=u.scroll.duration}if(p(u.scroll.easing)){r.easing=u.scroll.easing}}if(c(u.auto)){clearInterval(r.timer);r.timer=setInterval(v,r.interval)}function v(){if(p(u.direction)&&u.direction=="left"){q._clickMove("next",r.ele)}else{if(p(u.direction)&&u.direction=="right"){q._clickMove("prev",r.ele)}}}};function e(q){return(q===null)}function a(q){return(e(q)||typeof q=="undefined"||q===""||q==="undefined")}function g(q){return(q instanceof Array)}function j(q){return(q instanceof jQuery)}function m(q){return((q instanceof Object||typeof q=="object")&&!e(q)&&!j(q)&&!g(q)&&!f(q))}function l(q){return((q instanceof Number||typeof q=="number")&&!isNaN(q))}function p(q){return((q instanceof String||typeof q=="string")&&!a(q)&&!c(q)&&!o(q))}function f(q){return(q instanceof Function||typeof q=="function")}function k(q){return(q instanceof Boolean||typeof q=="boolean"||c(q)||o(q))}function c(q){return(q===true||q==="true")}function o(q){return(q===false||q==="false")}function d(q){return(p(q)&&q.slice(-1)=="%")}})(jQuery);